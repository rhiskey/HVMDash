@page "/settings"
@namespace HVMDash.Client.Pages
@using HVMDash.Shared
@using vkaudioposter_ef.Model
@using vkaudioposter_ef.parser

@using System.Text.RegularExpressions
@using System.ComponentModel.DataAnnotations
@using System.IO
@using System.Text.Json

@inject ISnackbar Snackbar
@inject IJSRuntime js
@inject HttpClient Http

<h3>Service options</h3>

<MudTimePicker PickerVariant="PickerVariant.Dialog" Label="Posts delay" @bind-Time="time" />

@code {

    TimeSpan? time { get; set;}
    private IEnumerable<Configuration> configuration;
    private Configuration cfg;

    protected override async Task OnInitializedAsync()
    {
        configuration = await Http.GetFromJsonAsync<IEnumerable<Configuration>>("api/Configuration");
        cfg = configuration.FirstOrDefault();

        time = new TimeSpan(cfg.HoursPeriod, cfg.MinutesPeriod, 00);

    }
}
